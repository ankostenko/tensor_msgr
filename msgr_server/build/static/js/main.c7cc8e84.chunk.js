(this.webpackJsonpmsgrjs=this.webpackJsonpmsgrjs||[]).push([[0],{133:function(A,e,t){},134:function(A,e,t){},288:function(A,e,t){"use strict";t.r(e);var s=t(3),n=t(0),l=t.n(n),a=t(16),c=t.n(a),o=(t(132),t(133),t(29)),r=(t(134),t(293)),i=t(291),u=t(294),d=t(112),h=t(35),j=t.n(h);var m=function(A){return Object(s.jsxs)("div",{onClick:function(){return A.chooseChat(A.chat)},className:"flex bg-gray-50 h-16 hover:bg-yellow-200 cursor-pointer",children:[Object(s.jsx)("div",{className:"flex-none",children:Object(s.jsx)("div",{className:"inline-block h-10 w-10 rounded-full ring-2 ring-white m-3",alt:"user_avatar",children:Object(s.jsx)("div",{className:"text-bold",children:A.chat.name.toLocaleUpperCase()[0]})})}),Object(s.jsxs)("div",{className:"flex-1 mt-3 overflow-auto",children:[Object(s.jsx)("div",{className:"font-bold flex justify-start subpixel-antialiased",children:A.chat.name}),Object(s.jsx)("div",{className:"font-medium truncate subpixel-antialiased",children:A.chat.message})]}),Object(s.jsx)("div",{className:"mt-3 mr-2 subpixel-antialiased sm:hidden md:block",children:A.chat.time})]})};function b(A){var e=Object(n.useState)([]),t=Object(o.a)(e,2),l=t[0],a=t[1];Object(n.useEffect)((function(){j()({method:"get",url:"http://localhost:5000/get_chats_by_user?username=".concat(A.username),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(e){var t=e.data.chats.map((function(e){return{key:e[2],name:e[0]===A.username?e[1]:e[0],message:e[4],time:e[5]}}));a(t)}));var e=setInterval((function(){return j()({method:"get",url:"http://localhost:5000/get_chats_by_user?username=".concat(A.username),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(e){var t=e.data.chats.map((function(e){return{key:e[2],name:e[0]===A.username?e[1]:e[0],message:e[4],time:e[5]}}));a(t)})),function(){return clearInterval(e)}}),5e3)}),[a,A]);var c=function(e){console.log(e),A.setChosenChat(e)};return console.log(l),Object(s.jsx)("div",{className:"flex-col",children:l.map((function(A){return Object(s.jsx)(m,{chooseChat:c,chat:A},A.key)}))})}function x(A){var e=Object(n.useState)([]),t=Object(o.a)(e,2),l=t[0],a=t[1];return Object(n.useEffect)((function(){var e=setInterval((function(){j()({method:"get",url:"http://localhost:5000/get_messages_by_chat_id?chat_id=".concat(A.chat_id),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(A){var e=A.data.messages.map((function(A){return{name:A[1],message:A[2],time:A[3]}}));a(e)}))}),100);return function(){clearInterval(e)}})),Object(s.jsx)("div",{className:"flex-col overflow-y-scroll message-list",children:l.map((function(A){return Object(s.jsx)("div",{className:"flex bg-gray-50 h-auto hover:bg-yellow-300 ml-10",children:Object(s.jsxs)("div",{className:"flex-1 mt-3 whitespace-normal text-left",children:[Object(s.jsx)("div",{className:"font-bold subpixel-antialiased inline-block",children:A.name}),Object(s.jsx)("div",{className:"font-normal inline-block ml-4",children:A.time}),Object(s.jsx)("div",{className:"font-normal truncate subpixel-antialiased text-left whitespace-normal pr-16 mt-2",children:A.message})]})})}))})}var f=function(A){return Object(s.jsx)("div",{children:A.users.map((function(e){return Object(s.jsxs)("div",{className:"flex bg-gray-50 h-16 hover:bg-yellow-200 cursor-pointer",onClick:function(){return t=e,console.log(t[0]),console.log(A.username),void j()({method:"post",url:"http://localhost:5000/create_chat",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},data:{username_1:A.username,username_2:t[0]}});var t},children:[Object(s.jsx)("div",{className:"flex-none",children:Object(s.jsx)("div",{className:"inline-block h-10 w-10 rounded-full ring-2 ring-white m-3 bg-".concat("yellow","-300"),alt:"user_avatar",children:Object(s.jsx)("div",{className:"font-bold mt-2.5",children:e[0].toLocaleUpperCase()[0]})})}),Object(s.jsx)("div",{className:"flex-1 mt-4 overflow-auto",children:Object(s.jsx)("div",{className:"font-medium flex justify-start subpixel-antialiased text-lg",children:e})})]},e)}))})};var p=function(){var A=Object(n.useState)(),e=Object(o.a)(A,2),t=e[0],l=e[1],a=Object(d.useForm)(),c=Object(o.a)(a,1)[0],h=Object(n.useState)(!0),m=Object(o.a)(h,2),p=m[0],O=m[1],g=Object(n.useState)(!1),w=Object(o.a)(g,2),v=w[0],y=w[1],C=Object(n.useState)(!1),N=Object(o.a)(C,2),W=N[0],T=N[1],k=Object(n.useState)(!1),S=Object(o.a)(k,2),F=S[0],q=S[1],Y=Object(n.useState)(!1),K=Object(o.a)(Y,2),L=K[0],V=K[1],D=Object(n.useState)(""),B=Object(o.a)(D,2),H=B[0],X=B[1],z=Object(n.useState)([]),E=Object(o.a)(z,2),R=E[0],G=E[1],I=Object(n.useState)(!1),P=Object(o.a)(I,2),J=P[0],U=P[1];return Object(s.jsx)("div",{className:"App flex-none h-screen overflow-hidden",style:{backgroundColor:v?"white":"#FCD34D"},children:v?Object(s.jsxs)(r.a,{style:{minHeight:"100%"},children:[Object(s.jsxs)(r.a.Sider,{theme:"light",width:"18%",className:"",style:{backgroundColor:"white"},children:[Object(s.jsx)("div",{className:"text-xl text-left ml-4 font-bold",children:H}),Object(s.jsxs)(i.a,{onFinish:function(A){return function(A){j()({method:"post",url:"http://localhost:5000/search",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},data:{username:A.search}}).then((function(A){G(A.data.users)}))}(A)},children:[Object(s.jsx)(i.a.Item,{name:"search",noStyle:!0,children:Object(s.jsx)("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430...",onChange:function(A){return function(A){""!==A.target.value?U(!0):U(!1)}(A)},className:"w-full inline-block pl-4 ring-2 ring-gray-300 rounded-lg focus:outline-none",style:{height:"40px"}})}),Object(s.jsx)("button",{type:"submit"})]}),!J&&Object(s.jsx)(b,{setChosenChat:l,chosenChatId:null===t||void 0===t?void 0:t.key,username:H}),J&&Object(s.jsx)(f,{users:R,username:H})]}),Object(s.jsx)(r.a,{className:"h-screen",style:{backgroundColor:"#F9FAFB"},children:t&&Object(s.jsxs)("div",{className:"h-screen overflow-hidden max-h-screen",children:[Object(s.jsx)(u.a,{offsetTop:0,children:Object(s.jsx)("div",{className:"flex h-1/8 font-semibold text-2xl",style:{backgroundColor:"#22B2DA"},children:Object(s.jsxs)("div",{className:"m-3 flex flex-row",children:[Object(s.jsx)("div",{className:"w-8 h-8 align-baseline cursor-pointer",onClick:function(){return l(null)},children:Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Object(s.jsx)("div",{className:"pt-0.5",style:{color:"#3B4A6B"},children:t.name})]})})}),Object(s.jsx)(x,{chat_id:t.key}),Object(s.jsx)(i.a,{onFinish:function(A){return function(A){c.resetFields(["sent_message"]),""!==A.sent_message&&j()({method:"post",url:"http://localhost:5000/msg",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},data:{message:A.sent_message,chat_id:t.key,sender:H}})}(A)},form:c,children:Object(s.jsx)(u.a,{offsetBottom:18,children:Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"bg-gray-200 flex flex-row p-2 mt-4",children:[Object(s.jsx)(i.a.Item,{name:"sent_message",noStyle:!0,children:Object(s.jsx)("input",{autoFocus:!0,autoComplete:"off",value:"",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",className:"w-full rounded-2xl h-10 focus:outline-none inline-flex p-2"})}),Object(s.jsx)("button",{className:"inline-block w-8 h-8 mt-1 transform rotate-90 focus:outline-none ",type:"submit",children:Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-600 cursor-pointer",children:Object(s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})})]})})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{className:"w-1/5 h-1/5",style:{marginLeft:"39%"},src:"data:image/png;base64,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",alt:""}),Object(s.jsxs)("div",{className:"flex-col justify-center",style:{marginLeft:"40%"},children:[Object(s.jsxs)("div",{className:"flex flex-row",children:[Object(s.jsx)("div",{onClick:function(){return O(!0)},className:"text-4xl text-left subpixel-antialiased font-sans font-black underline cursor-pointer w-1/16",style:{color:p?"#3B4A6B":"#22B2DA"},children:"\u0412\u0445\u043e\u0434"}),Object(s.jsx)("div",{onClick:function(){return O(!1)},className:"ml-3 text-4xl text-left subpixel-antialiased font-sans font-black underline cursor-pointer w-10",style:{color:p?"#22B2DA":"#3B4A6B"},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),Object(s.jsxs)("div",{children:[p&&Object(s.jsxs)(i.a,{onFinish:function(A){return function(A){if(X(""),V(!1),q(!1),T(!1),""!==A.login&&""!==A.password){var e=new FormData;e.append("username",A.login),e.append("password",A.password),j()({method:"post",url:"http://localhost:5000/login",headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"multipart/form-data"},data:e}).then((function(e){"success"===e.data.status?(y(!0),X(A.login)):T(!0)}))}}(A)},children:[Object(s.jsx)(i.a.Item,{name:"login",noStyle:!0,children:Object(s.jsx)("input",{name:"login",className:"flex w-4/12 ring-4 ring-yellow-300 h-10 rounded-2xl p-2 focus:outline-none text-lg focus:ring-blue-400",placeholder:"\u041b\u043e\u0433\u0438\u043d",style:{marginTop:"30px"}})}),Object(s.jsx)(i.a.Item,{name:"password",noStyle:!0,children:Object(s.jsx)("input",{name:"password",className:"flex w-4/12 ring-4 ring-yellow-300 h-10 rounded-2xl p-2 focus:outline-none text-lg focus:ring-blue-400 mt-4",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"})}),W&&Object(s.jsx)("div",{className:"font-semibold text-xl text-left text-red-500",children:"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(s.jsx)("button",{type:"submit",className:"mt-6 ml-0 flex justify-start focus:outline-none bg-yellow-500 rounded-full h-9 w-16 text-xl p-1 hover:bg-yellow-600",children:"\u0412\u043e\u0439\u0442\u0438"})]}),!p&&Object(s.jsxs)(i.a,{onFinish:function(A){return function(A){if(X(""),V(!1),q(!1),T(!1),""!==A.login&&""!==A.password)if(A.password===A.password_confirmation){var e=new FormData;e.append("username",A.login),e.append("password",A.password),j()({method:"post",url:"http://localhost:5000/register",headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"multipart/form-data"},data:e}).then((function(e){"success"===e.data.status?(y(!0),X(A.login)):q(!0)}))}else V(!0)}(A)},children:[Object(s.jsx)(i.a.Item,{name:"login",noStyle:!0,children:Object(s.jsx)("input",{name:"login",className:"flex w-4/12 ring-4 ring-yellow-300 h-10 rounded-2xl p-2 focus:outline-none text-lg focus:ring-blue-400",placeholder:"\u041b\u043e\u0433\u0438\u043d",style:{marginTop:"30px"}})}),Object(s.jsx)(i.a.Item,{name:"password",noStyle:!0,children:Object(s.jsx)("input",{className:"flex w-4/12 ring-4 ring-yellow-300 h-10 rounded-2xl p-2 focus:outline-none text-lg focus:ring-blue-400 mt-4",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"})}),Object(s.jsx)(i.a.Item,{name:"password_confirmation",noStyle:!0,children:Object(s.jsx)("input",{className:"flex w-4/12 ring-4 ring-yellow-300 h-10 rounded-2xl p-2 focus:outline-none text-lg focus:ring-blue-400 mt-4",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",type:"password"})}),F&&Object(s.jsx)("div",{className:"font-semibold text-xl text-left text-red-500",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0437\u0430\u043d\u044f\u0442\u043e"}),L&&Object(s.jsx)("div",{className:"font-semibold text-xl text-left text-red-500",children:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}),Object(s.jsx)("button",{type:"submit",className:"mt-6 ml-0 flex justify-start focus:outline-none bg-yellow-500 rounded-full h-9 w-1/7 text-xl p-1 hover:bg-yellow-600",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})]})]})})},O=function(A){A&&A instanceof Function&&t.e(3).then(t.bind(null,295)).then((function(e){var t=e.getCLS,s=e.getFID,n=e.getFCP,l=e.getLCP,a=e.getTTFB;t(A),s(A),n(A),l(A),a(A)}))};c.a.render(Object(s.jsx)(l.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root")),O()}},[[288,1,2]]]);
//# sourceMappingURL=main.c7cc8e84.chunk.js.map